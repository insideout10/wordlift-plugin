<div class="wl-widget-global-wrap">

  <!-- WL MESSAGE PANEL -->
  <div class="wl-widget-message-panel">

    <!-- ERROR MESSAGES -->
    <div ng-include="configuration.defaultWordLiftPath + 'templates/wordlift-widget-be/wordlift-error-message.html'">
    </div>

  </div>

  <!-- CREATE NEW ENTITY BTN -->
  <div 
    ng-click="setCurrentEntity(newEntity)"
    ng-hide="currentEntity"
    ng-include="configuration.defaultWordLiftPath + 'templates/wordlift-widget-be/wordlift-create-entity-btn.html'">
  </div>

  <!-- WL TOP WRAP -->
  <div class="wl-widget-global-top-wrap" ng-show="currentEntity">

    <!-- ENTITY PANEL -->
    <wl-entity-form 
      entity="currentEntity" 
      on-reset="unsetCurrentEntity()"
      on-submit="storeCurrentEntity()">
    </wl-entity-form>
    </div>
  </div>

  <!-- WL BOTTOM WRAP -->
  <div class="wl-widget-global-bottom-wrap" ng-hide="currentEntity">

    <!-- CLASSIFICATION BOX  -->
    <div ng-include="configuration.defaultWordLiftPath + 'templates/wordlift-widget-be/wordlift-classification-box.html'">
    </div>

    <!-- ARTICLE METADATA -->
    <div ng-include="configuration.defaultWordLiftPath + 'templates/wordlift-widget-be/wordlift-article-metadata.html'">
    </div>

    <!-- SUGGESTED IMAGES -->
    <div ng-include="configuration.defaultWordLiftPath + 'templates/wordlift-widget-be/wordlift-suggested-images.html'">
    </div>

    <!-- RELATED POST -->
    <div ng-include="configuration.defaultWordLiftPath + 'templates/wordlift-widget-be/wordlift-related-post.html'">
    </div>
    
  </div>
</div>

<!-- POST DATA BOX -->
<div class="wl-entity-input-boxes">
  <wl-entity-input-box entity="entity" ng-repeat="entity in analysis.entities | isEntitySelected"></wl-entity-input-box>
  <wl-entity-input-box entity="topic" ng-if="topic"></wl-entity-input-box>
  <wl-entity-input-box entity="publishedPlace" ng-if="publishedPlace"></wl-entity-input-box>
  <div ng-repeat="(box, entities) in selectedEntities">
    <input type='text' name='wl_boxes[{{box}}][]' value='{{id}}' ng-repeat="(id, entity) in entities">
  </div>
  <input type='text' name='wl_metadata[wl_topic]' value='{{topic.id}}' ng-if="topic">
  <input type='text' name='wl_metadata[wl_location_created]' value='{{publishedPlace.id}}' ng-if="publishedPlace">
</div>
