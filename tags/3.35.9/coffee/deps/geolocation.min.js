"use strict";angular.module("geolocation",[]).constant("geolocation_msgs",{"errors.location.unsupportedBrowser":"Browser does not support location services","errors.location.permissionDenied":"You have rejected access to your location","errors.location.positionUnavailable":"Unable to determine your location","errors.location.timeout":"Service timeout has been reached"}),angular.module("geolocation").factory("geolocation",["$q","$rootScope","$window","geolocation_msgs",function(e,t,n,a){return{getLocation:function(o){var r=e.defer();return n.navigator&&n.navigator.geolocation?n.navigator.geolocation.getCurrentPosition(function(o){t.$apply(function(){r.resolve(o)})},function(o){switch(o.code){case 1:t.$broadcast("error",a["errors.location.permissionDenied"]),t.$apply(function(){r.reject(a["errors.location.permissionDenied"])});break;case 2:t.$broadcast("error",a["errors.location.positionUnavailable"]),t.$apply(function(){r.reject(a["errors.location.positionUnavailable"])});break;case 3:t.$broadcast("error",a["errors.location.timeout"]),t.$apply(function(){r.reject(a["errors.location.timeout"])})}},o):(t.$broadcast("error",a["errors.location.unsupportedBrowser"]),t.$apply(function(){r.reject(a["errors.location.unsupportedBrowser"])})),r.promise}}}]);