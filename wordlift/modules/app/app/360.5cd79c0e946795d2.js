"use strict";(self.webpackChunkwordlift_plugin_app=self.webpackChunkwordlift_plugin_app||[]).push([[360],{6360:(nt,m,o)=>{o.r(m),o.d(m,{RecipesModule:()=>tt});var p=o(6895),f=o(8176),v=o(7579),_=o(8505),T=o(4351),y=o(9635),w=o(5698),Z=o(9300),R=o(6150),t=o(4650),P=o(6712),c=o(433),u=o(8800),l=o(13),x=o(545),A=o(5087),O=o(1354),b=o(1723),d=o(8231),C=o(7423),I=o(5505),J=o(3304),N=o(36),z=o(7570),M=o(4788);function S(n,a){1&n&&t.GkF(0)}function F(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"wlx-filters",22),t.NdJ("filterChange",function(i){t.CHM(e);const r=t.oxw(2);return t.KtG(r.filter=i)})("filterChange",function(){t.CHM(e);const i=t.oxw(2);return t.KtG(i.cursor.next(""))}),t.qZA()}if(2&n){const e=t.oxw(2);t.Q6J("filter",e.filter)("stats",e.stats)}}function Q(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"div",12)(1,"p",13),t._uU(2),t.qZA(),t.YNc(3,F,1,2,"wlx-filters",14),t.TgZ(4,"nz-select",15),t.NdJ("ngModelChange",function(i){t.CHM(e);const r=t.oxw();return t.KtG(r.postStatus=i)})("ngModelChange",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.reload())}),t._UZ(5,"nz-option",16)(6,"nz-option",17)(7,"nz-option",18),t.qZA(),t.TgZ(8,"nz-select",19),t.NdJ("ngModelChange",function(i){t.CHM(e);const r=t.oxw();return t.KtG(r.sort=i)})("ngModelChange",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.reload())}),t._UZ(9,"nz-option",20)(10,"nz-option",21),t.qZA()()}if(2&n){const e=t.oxw();t.xp6(2),t.AsE("",e.stats.total," ",e.stats.label,""),t.xp6(1),t.Q6J("ngIf",e.page),t.xp6(1),t.Q6J("ngModel",e.postStatus),t.xp6(1),t.Q6J("nzValue",void 0),t.xp6(3),t.Q6J("ngModel",e.sort)}}function U(n,a){1&n&&(t._UZ(0,"nz-empty",23),t.TgZ(1,"div",24),t._uU(2,"There are no Recipes here yet"),t.qZA()),2&n&&t.Q6J("nzNotFoundContent",null)}const g=function(){return{rows:1}};function E(n,a){1&n&&(t.TgZ(0,"tr")(1,"td"),t._UZ(2,"nz-skeleton",27),t.qZA(),t.TgZ(3,"td"),t._UZ(4,"nz-skeleton",27),t.qZA(),t.TgZ(5,"td"),t._UZ(6,"nz-skeleton",27),t.qZA()()),2&n&&(t.xp6(2),t.Q6J("nzActive",!0)("nzParagraph",t.DdM(9,g))("nzTitle",!1),t.xp6(2),t.Q6J("nzActive",!0)("nzParagraph",t.DdM(10,g))("nzTitle",!1),t.xp6(2),t.Q6J("nzActive",!0)("nzParagraph",t.DdM(11,g))("nzTitle",!1))}function H(n,a){if(1&n&&(t.TgZ(0,"tbody",25),t.YNc(1,E,7,12,"tr",26),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("ngForOf",e.skeletonRows)}}function Y(n,a){1&n&&(t.TgZ(0,"span",38),t._uU(1," \u2013 Draft"),t.qZA())}function L(n,a){if(1&n&&(t.TgZ(0,"a",39),t._uU(1,"Edit"),t.qZA()),2&n){const e=t.oxw().$implicit;t.s9C("href",e.parent_post_link,t.LSH)}}function D(n,a){if(1&n&&(t.TgZ(0,"a",39),t._uU(1,"View"),t.qZA()),2&n){const e=t.oxw().$implicit;t.s9C("href",e.view_link,t.LSH)}}function G(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"tr",29)(1,"td")(2,"a",30),t._uU(3),t.qZA(),t.YNc(4,Y,2,0,"span",31),t.TgZ(5,"div",32)(6,"div",33),t.YNc(7,L,2,1,"a",34),t.YNc(8,D,2,1,"a",34),t.qZA()()(),t.TgZ(9,"td",35),t._uU(10),t.qZA(),t.TgZ(11,"td",36)(12,"wlx-main-ingredient",37),t.NdJ("onMainIngredientChange",function(i){const h=t.CHM(e).$implicit,et=t.oxw(2);return t.KtG(et.ingredientChange(h,i))})("onStartEdit",function(){const r=t.CHM(e).$implicit,h=t.oxw(2);return t.KtG(h.startEdit(r.id))})("onStopEdit",function(){t.CHM(e);const i=t.oxw(2);return t.KtG(i.stopEdit())}),t.qZA()()()}if(2&n){const e=a.$implicit,s=a.index,i=t.oxw(2);t.xp6(2),t.Q6J("href",e.parent_post_link,t.LSH),t.xp6(1),t.Oqu(e.parent_post_title),t.xp6(1),t.Q6J("ngIf","draft"===e.post_status),t.xp6(3),t.Q6J("ngIf",e.parent_post_link),t.xp6(1),t.Q6J("ngIf",e.view_link),t.xp6(2),t.hij(" ",e.post_title," "),t.xp6(2),t.Q6J("wlxCyId","AutoCompleteField"+s)("data",e)("editMode",i.editId===e.id)}}function V(n,a){if(1&n&&(t.TgZ(0,"tbody"),t.YNc(1,G,13,9,"tr",28),t.qZA()),2&n){t.oxw();const e=t.MAs(10);t.xp6(1),t.Q6J("ngForOf",e.data)}}const $=function(){return[]},K=[{path:"",pathMatch:"full",redirectTo:"recipes"},{path:"recipes",data:{breadcrumb:"Recipes"},component:(()=>{class n{constructor(e,s){this.appSettings=e,this.postMatchesService=s,this.loading=!0,this.editId=null,this.perPage={value:10},this.postStatus="publish",this.sort="-date_modified_gmt",this.skeletonRows=[],this.cursor=new v.x,this.cursor$=this.cursor.asObservable().pipe((0,Z.h)(i=>null!=i),(0,_.b)(()=>{this.skeletonRows=Array(this.perPage.value),this.loading=!0}),(0,T.b)(i=>this.postMatchesService.listPostMatches({post_types:["wprm_recipe"],cursor:i,has_match:this.filter,limit:this.perPage.value,post_status:this.postStatus,sort:this.sort})),(0,y.z)((0,_.b)(i=>{this.page=i,this.loading=!1}))),this.Number=Number,this.stats=e.stats.find(i=>"Recipes"===i.label)}ngOnInit(){this.reload()}reload(){this.skeletonRows=Array(this.perPage.value),this.loading=!0,this.postMatchesService.listPostMatches({post_types:["wprm_recipe"],has_match:this.filter,limit:this.perPage.value,post_status:this.postStatus,sort:this.sort}).subscribe(e=>{this.page=e,this.loading=!1})}ingredientChange(e,s){(Number.isInteger(e.match_id)?this.postMatchesService.updatePostMatch({post_id:e.id,match_id:e.match_id,body:s}):this.postMatchesService.createPostMatch({post_id:e.id,body:s})).pipe((0,w.q)(1)).subscribe()}startEdit(e){this.editId=e}stopEdit(){this.editId=null}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(R.N),t.Y36(P.D))},n.\u0275cmp=t.Xpm({type:n,selectors:[["wlx-recipes"]],decls:23,vars:15,consts:[[4,"ngIf"],["nz-typography","","id","heading"],["nz-typography","","nzType","secondary","id","description"],["id","filters",4,"ngIf"],["noResult",""],[3,"nzData","nzNoResult","nzShowPagination","nzFrontPagination","nzTotal"],["basicTable",""],[1,"table-header"],[1,"fixed-size"],["nz-icon","","nz-tooltip","","nzTooltipTitle","The main ingredient entity matching the recipe title.","nzType","question-circle","nzTheme","outline",1,"tooltip"],["wlxHideTablePlaceholder","",4,"ngIf"],["wlxCy","","wlxCyId","RecipesPagination",3,"page","cursor","perPage"],["id","filters"],["id","count"],["wlxCy","","wlxCyId","RecipesFilters",3,"filter","stats","filterChange",4,"ngIf"],[1,"post_status",3,"ngModel","ngModelChange"],["nzLabel","All",3,"nzValue"],["nzValue","publish","nzLabel","Published"],["nzValue","draft","nzLabel","Drafts"],[3,"ngModel","ngModelChange"],["nzValue","-date_modified_gmt","nzLabel","Newest First"],["nzValue","+date_modified_gmt","nzLabel","Oldest First"],["wlxCy","","wlxCyId","RecipesFilters",3,"filter","stats","filterChange"],["nzNotFoundImage","simple",3,"nzNotFoundContent"],[1,"empty-description"],["wlxHideTablePlaceholder",""],[4,"ngFor","ngForOf"],["wlxSkeletonWidth","",3,"nzActive","nzParagraph","nzTitle"],["class","table-row editable-row",4,"ngFor","ngForOf"],[1,"table-row","editable-row"],["target","_blank",3,"href"],["class","recipes-draft",4,"ngIf"],[1,"links-main"],[1,"links"],["class","links-item","target","_blank",3,"href",4,"ngIf"],[1,"td-align"],[1,"autocomplete-input-column","td-align"],["wlxCy","","searchText","search ingredient","datasetUri","https://knowledge.cafemedia.com/food/",3,"wlxCyId","data","editMode","onMainIngredientChange","onStartEdit","onStopEdit"],[1,"recipes-draft"],["target","_blank",1,"links-item",3,"href"]],template:function(e,s){if(1&e&&(t.YNc(0,S,1,0,"ng-container",0),t.ALo(1,"async"),t.TgZ(2,"h1",1),t._uU(3,"Recipes"),t.qZA(),t.TgZ(4,"p",2),t._uU(5,' For each Recipe, WordLift matched the main ingredient which appears in the Structured Data "about" property. To assign a new ingredient, click on the name (or on the dash) and start typing to select it from the list. Then click anywhere to confirm the change.\n'),t.qZA(),t.YNc(6,Q,11,6,"div",3),t.YNc(7,U,3,1,"ng-template",null,4,t.W1O),t.TgZ(9,"nz-table",5,6)(11,"thead")(12,"tr")(13,"th",7),t._uU(14,"Post Title"),t.qZA(),t.TgZ(15,"th",7),t._uU(16,"Recipe Name"),t.qZA(),t.TgZ(17,"th",8),t._uU(18," Matched Ingredient "),t._UZ(19,"span",9),t.qZA()()(),t.YNc(20,H,2,1,"tbody",10),t.YNc(21,V,2,1,"tbody",0),t.qZA(),t._UZ(22,"wlx-pagination",11)),2&e){const i=t.MAs(8);t.Q6J("ngIf",t.lcZ(1,12,s.cursor$)),t.xp6(6),t.Q6J("ngIf",s.page),t.xp6(3),t.Q6J("nzData",s.page&&s.page.items?s.page.items:t.DdM(14,$))("nzNoResult",i)("nzShowPagination",!1)("nzFrontPagination",!1)("nzTotal",s.Number.MAX_SAFE_INTEGER),t.xp6(11),t.Q6J("ngIf",s.loading),t.xp6(1),t.Q6J("ngIf",!s.loading),t.xp6(1),t.Q6J("page",s.page)("cursor",s.cursor)("perPage",s.perPage)}},dependencies:[p.sg,p.O5,c.JJ,c.On,u.ZU,l.N8,l.Uo,l._C,l.Om,l.p0,l.$Z,x.ng,A.Q,O.l,b.b,d.Ip,d.Vq,C.Ls,I.N,J.r,N.p,z.SY,M.p9,p.Ov],styles:["#heading[_ngcontent-%COMP%]{color:#000000e0;font-weight:600;font-size:20px;line-height:32px;font-style:normal;margin-bottom:8px}wlx-pagination[_ngcontent-%COMP%], #filters[_ngcontent-%COMP%]{width:100%;flex-direction:row;display:flex;align-items:center;margin-bottom:16px}#count[_ngcontent-%COMP%]{font-weight:400;font-size:14px;line-height:24px;color:#00000073;margin:0}wlx-filters[_ngcontent-%COMP%]{margin-left:auto}#description[_ngcontent-%COMP%]{text-align:justify;font-weight:400;font-size:16px;line-height:24px;color:#000000a6;max-width:800px;font-style:normal;margin-bottom:24px}.autocomplete-input-column[_ngcontent-%COMP%]{padding:16px}.table-header[_ngcontent-%COMP%], .fixed-size[_ngcontent-%COMP%]{font-weight:600;font-size:14px;line-height:22px;color:#000000e0;min-width:369.33px;width:369.33px}.tooltip[_ngcontent-%COMP%]{cursor:pointer;margin:4px 3px;color:#00000073}.post_status[_ngcontent-%COMP%]{min-width:105px;margin-left:8px;margin-right:8px}.items_sort[_ngcontent-%COMP%]{min-width:164px;margin-left:8px}.links[_ngcontent-%COMP%]{display:none}.links[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{width:21px;height:16px;color:#007aff;font-style:normal;font-weight:400;font-size:12px;line-height:16px}.links[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:first-child{border-right:1px solid rgba(0,0,0,.15);margin-right:6px;padding-right:6px}td[_ngcontent-%COMP%]{height:80px}.links-main[_ngcontent-%COMP%]{height:16px}td[_ngcontent-%COMP%]:hover   .links[_ngcontent-%COMP%]{display:block}.td-align[_ngcontent-%COMP%]{padding-top:0}.recipes-draft[_ngcontent-%COMP%]{color:#000000a6;font-size:14px;font-style:normal;font-weight:400;line-height:24px}@media only screen and (max-width: 1368px){.table-header[_ngcontent-%COMP%]{min-width:auto;width:auto}}.empty-description[_ngcontent-%COMP%]{color:#00000073;font-size:14px;font-style:normal;font-weight:400;line-height:24px;margin-top:-28px;margin-bottom:24px}"]}),n})()}];let k=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[f.Bz.forChild(K),f.Bz]}),n})();var j=o(2271),B=o(5635),W=o(4586),X=o(2383),q=o(5540);let tt=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[p.ez,k,c.u5,u.ZJ,l.HQ,x.H0,j.m,d.LV,B.o7,W.D,X.ic,C.PV,q.o,z.cg,M.Xo]}),n})()}}]);